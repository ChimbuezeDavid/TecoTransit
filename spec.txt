### Project Specification: Automated Trip Management System

This system automates the entire booking lifecycle, from seat selection to trip confirmation. It is composed of two main pillars: a **Pre-Booking System** (controlled by the Fleet Manager) and a **Post-Booking System** (managed by automated Travel Lists).

#### Pillar 1: Pre-Booking & Seat Management

1.  **Admin Fleet Configuration (The Source of Truth):**
    *   The **Fleet Management System (FMS)** is the core. Admins create schedules for specific date ranges, defining how many vehicles of each type (`4-Seater`, `5-Seater`, etc.) are available on each day of the week.
    *   This configuration determines two things for the user:
        1.  **Which dates are bookable** on the calendar.
        2.  The **total number of seats available** for any given trip (date + route + vehicle).

2.  **Visual Seat Selection & Reservation:**
    *   **Goal:** Allow users to visually select specific seats from a layout and temporarily reserve them.
    *   **UI Change:** When a user selects a trip, instead of just seeing "12 seats available," they will see a simple visual layout of the vehicle with available seats they can click.
    *   **Temporary Lock:** When a user clicks a seat, that seat becomes "locked" (e.g., status changes to `pending_payment` in a new `seats` sub-collection in Firestore) for a short period (e.g., 10-15 minutes) to allow them to complete payment. This prevents double-booking. If payment is not completed in time, the seat becomes available again.

#### Pillar 2: Post-Booking & Automated Confirmation

1.  **The Travel List (Automated Grouping):**
    *   **Goal:** Automatically group paid passengers for a specific trip.
    *   **Mechanism:** When a user successfully pays, their booking status becomes `Paid`, and they are added to a **Travel List**.
    *   A "Travel List" is an automatic grouping of all passengers who have booked the *exact same trip*:
        *   Same Pickup Location
        *   Same Destination
        *   Same Vehicle Type
        *   Same Departure Date

2.  **Automated Trip Confirmation:**
    *   **Goal:** Automatically confirm a trip and notify passengers once a vehicle is full.
    *   **Trigger:** The system will constantly monitor the Travel Lists. When the number of `Paid` passengers on a list equals the capacity of the vehicle (e.g., 4 for a 4-Seater), the trigger fires.
    *   **Action:** The system automatically changes the status of all bookings on that list from `Paid` to `Confirmed` and sends a confirmation email to every passenger on the list.
